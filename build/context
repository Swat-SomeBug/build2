// file      : build/context -*- C++ -*-
// copyright : Copyright (c) 2014-2015 Code Synthesis Tools CC
// license   : MIT; see accompanying LICENSE file

#ifndef BUILD_CONTEXT
#define BUILD_CONTEXT

#include <string>
#include <ostream>
#include <unordered_set>

#include <build/path>

namespace build
{
  class scope;

  extern path work;
  extern path home;

  extern std::unordered_set<std::string> meta_operations;
  extern std::unordered_set<std::string> operations;

  // Return the src/out directory corresponding to the given out/src. The
  // passed directory should be a sub-directory of out/src_root.
  //
  path
  src_out (const path& out, scope&);

  path
  src_out (const path& out, const path& out_root, const path& src_root);

  path
  out_src (const path& src, scope&);

  path
  out_src (const path& src, const path& out_root, const path& src_root);

  // If possible and beneficial, translate an absolute, normalized path
  // into relative to the work directory.
  //
  path
  relative_work (const path&);
}

#endif // BUILD_CONTEXT
