# file      : tests/directive/assert.test
# copyright : Copyright (c) 2014-2016 Code Synthesis Ltd
# license   : MIT; see accompanying LICENSE file

.include ../common.test

$* <'assert true'                     : true
$* <'assert! false foo'               : not-false
$* <'assert true $no_such_function()' : skip-line
$* <'assert! $empty($build.version)'  : expr

: false
:
$* <'assert false' 2>>EOE != 0
<stdin>:1:1: error: assertion failed
EOE

: false-desc
:
$* <'assert false bad thing happened: (a == b)' 2>>EOE != 0
<stdin>:1:1: error: assertion failed: bad thing happened: false
EOE

: invalid
:
$* <'assert junk' 2>>EOE != 0
<stdin>:1:8: error: expected assert-expression to evaluate to 'true' or 'false' instead of 'junk'
EOE
