# file      : tests/test/script/builtin/cat.test
# copyright : Copyright (c) 2014-2016 Code Synthesis Ltd
# license   : MIT; see accompanying LICENSE file

# @@ I think these should be run indirectly (via cat & build)
# for cross-testing to work (we want to run the via the build
# system we built, not the one we used to acomplish this.

: in
:
cat <<EOI >>EOO
foo
bar
EOI
foo
bar
EOO

: dash
:
cat - <<EOI >>EOO
foo
bar
EOI
foo
bar
EOO

: file
:
cat <<EOI >>>out;
foo
bar
EOI
cat out >>EOO
foo
bar
EOO

: in-repeat
:
cat - <<EOI >>EOO
foo
bar
EOI
foo
bar
EOO

: non-existent
:
: Note that there is an optional trailing blank line in the regex that matches
: the newline added by msvcrt as a part of the error description.
:
cat in 2>>~%EOE% != 0
%cat: unable to print '.+[/\\]test[/\\]cat[/\\]non-existent[/\\]in': .+%
%%?
EOE

: empty-path
:
: Cat an empty path.
:
cat '' 2>"cat: invalid path ''" == 1

# @@ When piping is ready test cat on a big file to test it is asynchronous.
#
